ç»™å®šä¸€ä¸ªä»…åŒ…å« `0` å’Œ `1` ã€å¤§å°ä¸º `rows x cols` çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« `1` çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

![img](https://pic.leetcode.cn/1722912576-boIxpm-image.png)

```
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šmatrix = [["0"]]
è¾“å‡ºï¼š0
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šmatrix = [["1"]]
è¾“å‡ºï¼š1
```

 

**æç¤ºï¼š**

- `rows == matrix.length`
- `cols == matrix[0].length`
- `1 <= row, cols <= 200`
- `matrix[i][j]` ä¸º `'0'` æˆ– `'1'`

```
// Related Topics æ ˆ æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ å•è°ƒæ ˆ ğŸ‘ 1665 ğŸ‘ 0
```

### åŠ¨æ€è§„åˆ’ + å•è°ƒæ ˆ

è¯¥é¢˜å¯ä»¥æŠ½è±¡æˆ`84æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢`é¢˜çš„å¤šæ¬¡æ±‚è§£

1. å°†çŸ©é˜µè½¬æ¢ä¸ºè¡¨ç¤º`1`é«˜åº¦çš„çŸ©é˜µï¼Œæ¯ä¸ªå•å…ƒè¡¨ç¤ºå½“å‰è¿ç»­1çš„ä¸ªæ•°
   ![image-20240830171019422](image/image-20240830171019422.png)
2. å¯¹äºçŸ©é˜µä¸­çš„æ¯ä¸€å±‚æ•°ç»„æ±‚é¢ç§¯æœ€å¤§å€¼ç›¸å½“äºæ±‚è§£`84æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢`
3. éå†æ‰€æœ‰å±‚å³èƒ½å¾—åˆ°æœ€å¤§é¢ç§¯

```java
class Solution {
    public int maximalRectangle(char[][] matrix) {
        int max_area = 0;
        int[][] hights = new int[matrix.length][matrix[0].length];
        for (int j = 0; j < matrix[0].length; j++) {
            hights[0][j] = matrix[0][j] == '1' ? 1 : 0;
        }
        for (int i = 1; i < matrix.length; i++) {
            for (int j = 0; j < matrix[i].length; j++) {// è½¬æ¢ä¸ºé«˜åº¦çŸ©é˜µ
                if (matrix[i][j] == '1'){
                    hights[i][j] = matrix[i-1][j] == '1' ? hights[i -1][j] + 1 : 1;
                }
            }
        }
        int area;
        for (int i = 0; i < hights.length; i++) {
            area = largestRectangleArea(hights[i]);// 84çš„é¢˜è§£ï¼Œéå†æ¯å±‚æ±‚è§£æœ€å¤§å€¼
            if (max_area < area){
                max_area = area;
            }
        }

        return max_area;
    }

    public int largestRectangleArea(int[] heights) {
        int max_area = 0;
        Deque<Integer> stack = new ArrayDeque<>();
        int[] left = new int[heights.length];
        int[] right = new int[heights.length];
        for (int i = 0; i < heights.length; i++) {// æ‰¾å³è¾¹ç•Œ
            right[i] = heights.length - 1;
            while (!stack.isEmpty() && heights[stack.peek()] > heights[i]){
                Integer pop = stack.pop();
                right[pop] = i - 1;
            }
            stack.push(i);
        }
        stack.clear();
        for (int i = heights.length - 1; i >= 0; i--) {// æ‰¾å·¦è¾¹ç•Œ
            left[i] = 0;
            while (!stack.isEmpty() && heights[stack.peek()] > heights[i]){
                Integer pop = stack.pop();
                left[pop] = i + 1;
            }
            stack.push(i);
        }

        for (int i = 0; i < heights.length; i++) {
            int area = heights[i] * (right[i] - left[i] + 1);// è®¡ç®—é¢ç§¯
            if (area > max_area){
                max_area = area;
            }
        }
        return max_area;

    }
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(n * m)

![image-20240830172334212](image/image-20240830172334212.png)