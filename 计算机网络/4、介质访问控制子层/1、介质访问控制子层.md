> 介质访问控制子层(MAC，Medium Access Control)概述
>
> 功能：用来确定多路访问信道下一个使用者。
>
> 位置：处于链路层底部
>
> 多路访问信道：网络链路可以分为两大类，使用点到点连接和使用广播信道。在点到点链路中使用PPP协议即可完成数据帧的封装、传输。但是在**广播信道**中 ，多个使用者连接在一条信道上，信道上的所有数据帧会被信道上的所有连接者接收。
>
> 多路访问信道的问题：多个用户同时发送信号时会导致信号冲突，数据丢失的问题，所以MAC子层就是解决将有谁区使用信道的问题。

> 信道分配
>
> 信道分配的方式由两类
>
> 1、静态信道分配：如给每个用户分配固定的频率或者时间片。该分配方式简单易实现，但是用户不使用信道时会造成信道资源浪费。
>
> 2、动态信道分配：动态的决定信道的下一个使用者，以最大限度的利用信道资源。具体方法由多路访问协议实现。

> 多路访问协议
>
> 有冲突协议：ALONA、CSMA
>
> 无冲突协议：位图协议、令牌传递协议、二进制倒计数协议
>
> 有限竞争协议：自适应树遍历协议

> ALOHA
>
> **纯ALOHA：**
>
> 特点：用户需要发送数据时就传输，中央处理器将会把接收到的数据帧广播给所有站，以表明成功接收到的帧。这样发送站就可以知道自己的帧是否因为冲突而损坏。如果帧被破坏了发送方就需要等待一段随机时间再次发送帧。
>
> 缺点：有时候前一个帧与后一个帧可能只有几bit重叠导致整个帧失效，导致重传。造成信道浪费。（P203，图4-1）
>
> **分槽ALONA：**
>
> 特点：在纯ALOHA的基础上对信道进行分槽，使得每个时间槽对应一个位置的帧。发送方在发送帧时必须在时间槽的开始才能发送。避免了前后两帧小部分重叠导致损坏的情况。使得信道利用率是纯ALOHA的一倍。时间的同步一般有中央计算机定时发出脉冲实现。

> CSMA：载波侦听多路访问，广播信道上的用户通过侦听信道上的载波判断信道是否正在被使用。
>
> **1-坚持载波检测多路访问：**发送方一直侦听信道，若信道空闲则发送数据，若在使用则持续侦听直到信道空闲立刻开始发生数据。若发生冲突则等待一个随机时间，在继续上述过程。
>
> **非坚持CSMA：**发生方侦听信道，若空闲则发生数据。若信道正在被使用则不持续侦听，等待一个随机时间后重复上述步骤。
>
> **p-坚持CSMA：**适用于分时间槽的信道
>
> **CSMA/CD：**带有冲突检测的CSMA，与上述几个CSMA的区别是，每个站快速检测到发生冲突后立即停止传输帧而不是继续完成传输。根据该协议的特点信道存在几个时期，传输期、竞争期、空闲期。（P208，图4-5）

> 无冲突协议：使用不产生冲突的方法解决信道竞争其发生冲突的问题
>
> **位图协议：**将竞争其划分N个时间槽，对应N个发生站。每个发生站要发生数据时需要在竞争期的对应槽中传输1位，表示要发送数据。若有多个发送方表示要发送数据，则按照时间槽的顺序发送，就不会产生冲突。（P209，图4-6）
>
> **令牌传递协议：**将广播信道上的所有站构造成一个逻辑上的环结构。同时定义一个令牌，只有拿到令牌的站才能发送数据。每个站在发送完数据后需要把令牌传递给下一个站。若站不需要发送数据也要把令牌传递给下一站。实现顺序轮流发送数据帧。避免冲突出现。
>
> **二进制倒计数协议：**每个站在发生数据时先广播自己的地址，若有多个站广播了地址，则与自己的地址比较，由地址大的站先发送数据。每轮数据发送后都会开始下一轮竞争。（P211）

> 有限竞争协议
>
> **自适应树遍历协议：**在上述讲到的协议中或多都提到了”竞争“的概念。在轻负载下，竞争方法可以有效的适用在信道上，随着负载的增加，竞争仲裁所带来的开销变大，信道利用率变低。但是无冲突协议在这个时候就能很好的发挥作用。
>
> 所以把竞争协议和无冲突协议优势结合器来的协议称为——有限竞争协议，顾名思义只在特定条件下才发生竞争，高负载下使用无冲突方法。
>
> 具体实现是自适应树遍历协议（P213）