> 简介
>
> ​		在电子邮件上使用密码学知识，可以保护个人的隐式，下面介绍两种电子邮件加密协议，其中PGP基本由一个人创造，S/MIME是IETF在电子邮件安全领域的成果。

> PGP
>
> ​		**PGP：**使用IDEA的块密码来加密数据，使用RSA来管理密钥，使用MD5校验数据完整性。PGP处理后的邮件输出格式为Base64。
>
> ​		**发送方PGP协议处理过程：**
>
> ​			1、将邮件明文进行MD5散列，并用私钥签名
>
> ​			2、将散列值和明文连接起来进行Zip压缩
>
> ​			3、对压缩后的数据进行IDEA加密，使用密钥K~M~
>
> ​			4、将密钥K~M~使用Bob公钥加密，将数据密文和密钥密文连接起来进行Base64编码后发出
>
> ![image-20210416140058909](image\image-20210416140058909.png)
>
> ​		**接收方的PGP处理：**
>
> ​			1、将接收到的数据进行Base4解密
>
> ​			2、使用自己的公钥解密得到K~M~，使用K~M~解密得到压缩后的数据
>
> ​			3、将压缩后的数据进行解压，得到明文+签名过的散列值
>
> ​			4、对明文进行MD5散列运行，在使用Alice公钥对散列值进行解密，对比两个散列值是否相同
>
> ​		**PGP邮件格式：**
>
> ​			整个数据包中只有开头的ID of E~B~字段没有加密，这个字段是用于PGP密钥管理。
>
> ![image-20210416140727681](image\image-20210416140727681.png)
>
> ​		**PGP密钥管理：**每个用户都在本地维护两个数据结构，一个公钥环，一个私钥环。
>
> ​			私钥环：保存用户的私钥，允许用户使用PGP时切换私钥
>
> ​			公钥环：保存其他用户公钥，一个接收邮件的用户可能保存有多个公钥-私钥，发送方可以随机选择一个公钥进行使用，这就要求发送方在数据包中的**ID of E~B~字段**给出使用接收端的公钥信息。并且数据包中的**ID of E~A~字段**表明了发送方使用的私钥，接收方根据这个信息使用对应的公钥解密。
>
> ​		（现在PGP协议不仅仅支持传统的密钥管理方式，也支持X.509证书的公钥管理）

> S/MIME
>
> ​		S/MIME使用标准的算法和协议。