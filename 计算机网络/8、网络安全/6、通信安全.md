> 简介
>
> ​		前面的章节已经介绍了加密技术，数字签名等内容，接下来要介绍的是实际中加密技术的具体应用。

> IPSec
>
> ​		**前言：**多年以来IETF一直清楚，Internet缺乏安全性。但是在I内特人体上增加安全性并不是一件容易的事，首选要解决的就是在哪一层面上施加安全措施。绝大多数专家认为安全应该是端到端的，即安全应该实现在应用层。这要求数据在源端被加密在接收端被解密，这显然是合理的。但是实现起来要求改变所有的应用系统，以便它们能够感知到安全特性，然而要改变一个长久以来的习惯往往是最难的。
>
> ​		另一种观点是，用户并不理解安全性，所有网络层应该认证和加密数据包，而不是让普通用户卷进来。长期争执后这种观点胜出，因此IEFT定义了一个网络层的安全标准——IP安全（IP security）
>
> ​		**IPSec：**是一个多服务、多算法、多粒度的框架，IPSec提供认证、加密、数据完整性、重放攻击保护等服务，用户可以根据需求选择。IPSec支持多种不同加密的算法，也支持无加密算法，IPSec可能保护单个TCP连接、也可以保护一个主机之间的所有流量。
>
> ​		**IPSec组成：**两种新头部、一个安全关联及密钥管理协议（ISAKMP，Internet Security Association and Key Management Protocol）ISAKMP是一个框架，其中用来展开工作的事IKE协议（Internet Key Exchange）。
>
> ​		**IPSec模式：**IPSec使用两种模式发送数据包。
>
> ​			传输模式：IPSec头被插在IP同的后面，IP头中的Protocol字段要做相应的修改以表明后面是一个IPSec头部。
>
> ​			隧道模式：整个IP数据包连同头一起被封装到一个新的IP数据包的数据部分。这个数据包有一个全新的IP头。这个隧道穿越沿途的不安全网络，终点机器负载将这个IP头部剥掉，露出原有的IP数据包传递给安全网络。
>
> ​		**两种头部：**（P634、P635）
>
> ​				AH头部：提供完整性检查和防止重放攻击
>
> ​				ESP头部：提供完整性检查、加密、防重放攻击（ESP的完整性检查不包括IP头部）

> 防火墙
>
> ​		IPSec保证了两点之间的传输安全，但无法阻止有害物入侵内部网络，而防火墙则提供这样的功能。
>
> ​		**防火墙：**防火墙实际上是一个包过滤器，它通过设置的规则判断进入内部网络的数据包是否合法，非法的包将被丢弃。设置防火墙的难点在于如何在保存对外联系的基础上阻止有害物入侵。
>
> ​		**DMZ：**非军事化区域（DeMilitarized Zone）管理员一般将内部网络按照安全性需求划分区域，一些安全性较低的部分被划分为DMZ区。外网可以直接服务DMZ区，但不允许访问其他区域，内网和DMZ区可以访问外网，内外和DMZ区可以互相访问。一般DMZ区会放置一些用于提供服务的服务器。
>
> ​		**状态防火墙：**早期防火墙用规则来过滤数据包，这使得用户在使用一些应用时会产生无法无法的情况。而状态防火墙将数据包映射到连接，使用TCP/IP来跟踪连接。这使得只要用户先发送一个对外的连接请求后，防火墙就像这个这个链接上的数据包映射到这条状态上保证数据包可以通过。而由外部先发起的一个TCP链接由于防火墙没有这个链接的状态记录所有被拒绝掉，放置外部恶意访问。
>
> ​		**应用层网关：**这是对状态处理的另一层复杂性应用，应用层网关可以检查数据包内部的信息，判断出该数据包正在交互哪种应用，入访问网页，使用FTP等。
>
> （很显然防火墙违法了协议的标准分层，它是网络层设备却会窥视传输层甚至应用层数据）

> 虚拟专用网
>
> ​		专用网络：通过真实的物理线路连接两个网络，实现一个私有的专用网络
>
> ​		虚拟专用网络：在Internet上构建一个专用网络，实际上还是通过Internet传输。其原理是通过隧道技术实现Internet上的安全传输，第三方无法窥视到隧道内的数据，隧道内的数据也不会无故泄露出去。隧道技术实际上是一种包的再封装技术。IPSec隧道模式就可以看作是一中VPN。
>
> ​		其他的还有MPLS VPN等技术。

> 无线安全
>
> ## **前言**
>
> ​		对于无线这个介质来说，安全本是不存在的，无线信号本身就是广播式的发送，只要再接收范围内无论是不是接收者，都可以将无线信号保存下来，如何解析，所有的内容毫无保留的被第三方接收。
>
> ​		所有再无线领域内使用加密技术无疑是非常必要的。
>
> ## **802.11安全**
>
> ​		WPA2：WIFI保护接入点2（WIFI Protected Access 2），它实现了无线链路层安全，防止一个节点阅读另一对节点之间发送的消息。
>
> ​		**802.11有两种使用场景：**
>
> ​			企业：公司中设有一台认证服务器，该服务器保存用户名和口令。每个用户都拿到一个加密密钥，其他用户难以推导。密钥是根据用户的口令和一些其他传输设置。
>
> ​			家庭：使用一个共享密码，每个用户都拿到一个加密密钥，其他用户的密钥容易从共享密码推导安全性较低。
>
> ​		**802.11认证过程：**在具有认证服务器的场景中，客户端和认证服务器交互的过程由**EAP协议**定义
>
> ​		**802.11握手过程：**握手过程在认证过程之后，用来计算一个会话密钥。具体4次握手过程如下
>
> ​			1、AP发送一个随机值开始握手，这个随机值无意义
>
> ​			2、客户端生成一个随机值，并且根据双方MAC地址、自己的临时值，主密钥计算会话密钥K~s~，并发送自己的随机值给AP，数据包中携带完整性校验MIC。
>
> ​			3、AP接收后用同样的方法计算随机值，验证完整性，如何使用K~s~加密发送一个报文以表示自己已经获得K~s~
>
> ​			4、客户端收到后用K~s~加密回复一个确认信息，表示自己也有K~s~
>
> （若AP想要发送广播，则可以分发一个共享的密钥，通过这个密钥加密发送广播）
>
> ​		**802.11传输过程：**在确定完密钥后就可以使用密钥进行数据传输，这个过程由两个协议定义，1、TKIP（临时密钥完整性协议）它已经被破解。2、CCMP（计数器模式消息认证码协议）
>
> ## **蓝牙安全**
>
> ​		对于使用无线介质的蓝牙来说，安全措施同样是必要的。
>
> ​		蓝牙2.1以前使用了4位10进制的密钥长度一共有10^4^种可能。称为万能密钥
>
> ​		蓝牙2.1只有有4中安全模式，从没有任何安全到完全的数据安全。它们先检查通信双方是否具有相同的万能密钥，所有则开始协商通信过程是否加密、检查完整性等。若要加密它们会选择128位会话密钥。
>
> ​		蓝牙加密使用E~0~的流密码；完整性检查使用SAFER+，两者都是传统的对称密钥块密码算法。

