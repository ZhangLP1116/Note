> 之前介绍的内存管理中，所有的内存都是连续的，分配方法也是在内存地址连续的基础上进行分配，连续内存分配存在一些的缺点：
>
> ![image-20210204153736444](image\image-20210204153736444.png)

> 现在介绍非连续内存分配，非连续内存分配是指将一个程序分配到几个地址不连续的内存空间中。
>
> 优缺点点如下
>
> ![image-20210204154124905](image\image-20210204154124905.png)
>
> ![image-20210204154157377](image\image-20210204154157377.png)
>
> 当使用非连续内存分配方式进行内存管理，那么就需要考虑如何建立虚拟地址和物理地址之间的转换。
>
> 如果使用软件方法来处理势必会带来更大的开销，如果用硬件方法处理则会增加成本

> 硬件方案：分段，分页
>
> **分段**
>
> **如何分段：**将逻辑内存认为的划分成几块，比如由堆栈段专门存放程序堆栈数据，主程序端专门存在主程序数据。以此同一个程序将根据这几个部分被划分到几个不同的内存单元中。
>
> ![image-20210204160050797](image\image-20210204160050797.png)
>
> ![image-20210204160249965](image\image-20210204160249965.png)
>
> **如何寻址：**如何索引就是如何用地址表示这种分段的形式。这里可以使用类似二维表的定位方法，使用两个数据来表示一个地址，一个是所处的段地址，一个是位于段中的偏移地址
>
> ![image-20210204161112402](image\image-20210204161112402.png)
>
> **分段实现：**
>
> 逻辑地址使用**段号+偏移地址**的形式，物理地址使用**起始地址+偏移地址**的方式表示
>
> 两者之间的映射关系由操作系统创建一个段表来实现，在段表中保存每个段的起始地址和空间大小。
>
> 当CPU要访问一个物理地址时就根据逻辑地址的段号作为段表中的索引找到对应的段起始地址，在由起始地址+逻辑地址中的偏移地址形成一个物理地址，以达到访问目的。
>
> 下图的base和limit指向相反了
>
> ![image-20210204162224785](image\image-20210204162224785.png)

> **分页**：当前CPU常用的机制
>
> **如何寻址，如何分页**：页地址+偏移地址，与分段中段地址+偏移地址的区别在于，分段中不同段的大小可能是不同的，而分页中每个页大小往往是固定的，页大小的划分往往是2的幂次，512Byte、4096Byte、8192Byte，逻辑内存中的页大小与物理内存中的页大小划分一致。物理内存中的页称作frame(帧)、逻辑内存中的页称作page(页)
>
> ![image-20210204163628254](image\image-20210204163628254.png)
>
> ![image-20210204163757791](image\image-20210204163757791.png)
>
> 物理地址计算练习
>
> 如下图，给出一个16位的单元来表示物理地址，由上图地址结构可知其中低位表示帧内偏移地址，高位表示帧号，计算物理地址
>
> 由题可知用9位来表示帧内偏移，则表示此处每个帧大小为2^9^bit，则前7位就表示帧号所以可知物理内存中共有2^7^个帧。根据给出的物理地址信息，前7位中的值为3，后9位值为6，则二元组表示为（3，6）
>
> 所以物理地址为：3*512+6=1542
>
> ![image-20210204164851260](image\image-20210204164851260.png)
>
> page的地址的组成与计算和帧类似，如下图
>
> ![image-20210204170409575](image\image-20210204170409575.png)
>
> **如何实现**：逻辑地址到物理地址的转换。由操作系统创建一个页表，保存帧号，由于页的大小是固定的所以这里不用保存每个页的大小。
>
> CPU寻址时根据逻辑地址中的页号作为索引，查找页表中对应位置的帧号，在由帧号+逻辑地址中的偏移地址计算出物理地址。
>
> ![image-20210204171429768](image\image-20210204171429768.png)
>
> **页寻址机制**
>
> ![image-20210204172014607](image\image-20210204172014607.png)