### JVM GC结构

> ![image-20210804163620356](image\image-20210804163620356.png)

### GC的任务

> 1. 判断哪些内存需要回收
>2. 什么时候回收
> 3. 怎么回收

### 追踪需要回收的对象

> 1. 引用计数法：使用一个引用计数器保存一个对象的被引用数，若一个变量被引用数为0则可以认为该变量可以被回收
>2. 可达性分析：为了解决引用计数器中存在的循环引用问题，java使用可达性分析方法，该发放对一系列的GC root为起点进行搜索，若GC root和一个对象之间没有可达的路径则认为该对象不可达。但不可达不代表可回收对象，要怎么回收由回收算法复杂。

### 垃圾收集算法

> #### 标记清除法
>
> ![image-20210804165042229](image\image-20210804165042229.png)
>
> #### 复制算法
>
> ![image-20210804165301255](image\image-20210804165301255.png)
>
> ![image-20210804165229090](image\image-20210804165229090.png)
>
> #### 标记整理算法
>
> ![image-20210804165333730](image\image-20210804165333730.png)
>
> #### 分代收集算法：特点是将管理的内存分区，对不同区域使用不同的收集算法
>
> 分区：
>
> 1、新生代：用来存放新创建的对象，一般占据堆的1/3空间，由于频繁的创建对象，所有新生代会频繁的触发MinorGC。新生带中又分Eden区、ServivorFrom区、ServivorTo区三个。
>
> ![image-20210804170154247](image\image-20210804170154247.png)
>
> MinorGC执行过程：MinorGC采用复制算法，过程为复制——>清空——>互换
>
> ![image-20210804170413455](image\image-20210804170413455.png)
>
> ![image-20210804170644070](image\image-20210804170644070.png)
>
> 2、老年代：
>
> ![image-20210804165923563](image\image-20210804165923563.png)
>
> ![image-20210804170627683](image\image-20210804170627683.png)
>
> 3、永久代：
>
> ![image-20210804170437407](image\image-20210804170437407.png)

### 垃圾收集器

> 由于分代收集的存在不同的垃圾收集器又各自的工作区域
>
> ![image-20210804171154559](image\image-20210804171154559.png)
>
> #### Serial收集器
>
> ![image-20210804171238574](image\image-20210804171238574.png)
>
> #### ParNew收集器
>
> ![image-20210804171345402](image\image-20210804171345402.png)
>
> #### Parallel Scavenge收集器
>
> ![image-20210804171442701](image\image-20210804171442701.png)
>
> #### Serial Old收集器
>
> ![image-20210804171805326](image\image-20210804171805326.png)
>
> ![image-20210804171828051](image\image-20210804171828051.png)
>
> ![image-20210804171835950](image\image-20210804171835950.png)
>
> #### Parallel Old收集器
>
> ![image-20210804171903071](image\image-20210804171903071.png)
>
> #### CMS收集器
>
> ![image-20210804172011307](image\image-20210804172011307.png)
>
> ![image-20210804172112347](image\image-20210804172112347.png)
>
> ![image-20210804172118715](image\image-20210804172118715.png)
>
> ![image-20210804172131325](image\image-20210804172131325.png)
>
> ![image-20210804172254430](image\image-20210804172254430.png)
>
> #### G1收集器
>
> ![image-20210804172400953](image\image-20210804172400953.png)
>
> 