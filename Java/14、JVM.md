### JVM结构

> ![image-20210804160334777](image\image-20210804160334777.png)

### Hotspot JVM后台进程

> ![image-20210804160618127](image\image-20210804160618127.png)

### JVM 内存区域

> ![image-20210804160901794](image\image-20210804160901794.png)
>
> ### 私有区域
>
> 1. 程序计数器：一块很小的内存指向当前线程所执行的字节码行号，若执行的是Java方法PC寄存器保存当前JVM字节码指令地址，若是Native方法则PC内容为空
>2. 本地方法栈：与虚拟机栈作用类似，区别在于该栈为Native方法服务（在结构运行的情况下该栈可以与虚拟机栈合一）
> 3. 虚拟机栈：记录Java线程活动记录
> 
> ### 共享区域
>
> 1. 堆：被线程共享的区域，创建的对象数组都保存在堆内存空间中，这也是垃圾收集器工作的主要区域，这些被存放在堆中的数据可以被所有线程共享不用多次创建，节省内存空间。
>2. 方法区：用于存储JVM的类加载信息、常量、静态变量、hotspot jvm编译后的机器码。hotspot VM把垃圾收集区域扩展到方法区，将方法区视为永久代进行管理，不用为方法区专门设置专门的内存管理器（方法区的内存管理主要是针对常量池的回收，和类型的卸载）。**常量池**用于存放编译期生成各种子面量和符号引用。

### java进程与虚拟机

> 每个java进程都会创建一个java虚拟机，一个Java进程可以创建多个线程，不同线程拥有各自的私有区域，同时可以访问虚拟机中的线程公共区域