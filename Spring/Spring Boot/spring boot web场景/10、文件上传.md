### 文件上传

#### 1、相关组件

自动配置组件：MultipartAutoConfiguration

配置文件绑定类：MultipartProperties

配置文件属性前缀：spring.servlet.multipart

默认限制：单个文件不能大于1MB，整个请求不能大于10MB



#### 2、功能使用

1. 使用@RequestPart注解获取文件域数据
2. 使用MultipartFile类型对象接受文件域数据
3. 调用MultipartFile对象方法处理文件域数据

前端表单

```html
<form method="post" action="/upload" enctype="multipart/form-data">
    <input type="email" name="email"><br>
    <input type="text" name="username"><br>
    <input type="file" name="headerImg"><br> // 单文件上传
    <input type="file" name="photos" multiple><br>// 多文件上传
    <input type="submit" value="提交">
</form>
```

```java
    @PostMapping("/upload")
    public String upload(@RequestParam("email") String email,
                         @RequestParam("username") String username,
                         @RequestPart("headerImg") MultipartFile headerImg,
                         @RequestPart("photos") MultipartFile[] photos) throws IOException {

        log.info("上传的信息：email={}，username={}，headerImg={}，photos={}",
                email,username,headerImg.getSize(),photos.length);

        // 单文件保存
        if(!headerImg.isEmpty()){
            //保存到文件服务器，OSS服务器
            String originalFilename = headerImg.getOriginalFilename();
            headerImg.transferTo(new File("H:\\cache\\"+originalFilename));
        }

        // 多文件保存
        if(photos.length > 0){
            for (MultipartFile photo : photos) {
                if(!photo.isEmpty()){
                    String originalFilename = photo.getOriginalFilename();
                    photo.transferTo(new File("H:\\cache\\"+originalFilename));
                }
            }
        }


        return "main";
    }
```



